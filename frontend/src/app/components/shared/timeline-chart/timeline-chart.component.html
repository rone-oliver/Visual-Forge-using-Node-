<div class="horizontal-timeline-container">
  <div class="timeline-bar"></div>

  @for (event of eventPositions(); track event.timestamp) {
    <mat-icon 
      [class.timeline-event-icon]="!event.isEndpoint"
      [class.timeline-endpoint-icon]="event.isEndpoint"
      [class.satisfied]="event.isEndpoint && isSatisfied()"
      [class.align-top]="event.verticalAlign === 'top'"
      [class.align-bottom]="event.verticalAlign === 'bottom'"
      [style.left.%]="event.position"
      [matTooltip]="event.message + '\n' + (event.timestamp | date: 'medium')"
      matTooltipClass="policy-tooltip"
      (click)="$event.stopPropagation()"
    >{{ event.icon }}</mat-icon>
  }

  @if (eventPositions().length === 0) {
    <div class="empty-state-message">No timeline events yet.</div>
  }
</div>